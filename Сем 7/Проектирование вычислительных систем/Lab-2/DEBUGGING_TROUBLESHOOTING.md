# Устранение проблем подключения отладчика STM32

## Проблема
Ошибки подключения OpenOCD:
- Connection timed out на порту 3333
- Invalid IDCODE
- IR capture error
- Invalid ACK in DAP response
- JTAG-DP STICKY ERROR

## Решение 1: Исправлена конфигурация
✅ Обновлен файл `LAB_2 Debug.launch` для использования правильного конфига `Lab_2_1 Debug.cfg` (ST-Link + SWD)

## Дополнительные шаги при проблемах

### 1. Проверка подключения отладчика
- Убедитесь, что ST-Link подключен к компьютеру
- Проверьте USB-кабель (должен поддерживать передачу данных)
- Попробуйте другой USB-порт

### 2. Проверка драйверов ST-Link
- Установите/обновите драйверы ST-Link
- Проверьте в Диспетчере устройств наличие "STMicroelectronics STLink dongle"

### 3. Проверка подключения к плате
- Проверьте подключение SWDIO, SWCLK, GND
- Убедитесь, что питание платы включено
- Проверьте, что плата не находится в режиме низкого энергопотребления

### 4. Настройки частоты
Если проблемы продолжаются, попробуйте снизить частоту отладки:
- В launch конфигурации измените `DBG_INTERFACE_FREQUENCY` с 8000000 на 4000000 или 2000000
- В файле конфигурации измените `set CLOCK_FREQ 8000` на `set CLOCK_FREQ 4000` или `set CLOCK_FREQ 2000`

### 5. Режим сброса
Если микроконтроллер завис, попробуйте:
- Изменить `DBG_RESET_MODE` с `connect_under_reset` на `software` или `hardware`
- Нажать кнопку Reset на плате перед запуском отладки

### 6. Проверка занятости портов
- Убедитесь, что порт 3333 не занят другим процессом
- Закройте другие экземпляры OpenOCD/GDB

### 7. Альтернативный конфиг
Если используется FTDI адаптер вместо ST-Link:
- Используйте `SDK1_1_M FTDBG.cfg` (но тогда нужно изменить интерфейс на JTAG в launch конфигурации)

## Текущая конфигурация
- **Интерфейс**: ST-Link (SWD)
- **Транспорт**: dapdirect_swd
- **Частота**: 8 MHz
- **Режим сброса**: connect_under_reset
- **Порт GDB**: 3333

